<!doctype html>
<html>

<head>
  <script src="https://pixijs.download/release/pixi.js"></script>

</head>

<body style="background-color:#009820;">
  <script>
    let app = new PIXI.Application({ width: 300, height: 600, background: '#009820' });
    document.body.appendChild(app.view);


    // Create the field background container
    const container = new PIXI.Container();
    // Add it to the stage
    app.stage.addChild(container);
    // Load the texture map
    const fieldImage = PIXI.Texture.from('images/field.png');
    const fieldSprite = new PIXI.Sprite(fieldImage);
    container.addChild(fieldSprite);

    // Create a green player sprite from image path and add it to the stage
    let playerGreen = PIXI.Sprite.from('images/player-green.png');
    app.stage.addChild(playerGreen);

    // center the blue player sprite's anchor point
    playerGreen.anchor.x = 0.5;
    playerGreen.anchor.y = 0.5;

    // Add a ticker callback to move the green player sprite back and forth
    let elapsed = 0.0;
    app.ticker.add((delta) => {
      elapsed += delta;
      playerGreen.x = 150.0 + Math.cos(elapsed / 50.0) * 100.0;
      playerGreen.y = 100.0;
    });


    // Create a blue player sprite from image path and add it to the stage
    let playerBlue = PIXI.Sprite.from('images/player-blue.png');

    app.stage.addChild(playerBlue);
    playerBlue.interactive = true;

    // Center the blue player sprite's anchor point
    playerBlue.anchor.x = 0.5;
    playerBlue.anchor.y = 0.5;

    // Move the blue player sprite to where she/he will shoot from
    playerBlue.position.x = 150;
    playerBlue.position.y = 450;



    // Enable interactivity!
    app.stage.interactive = true;

    // Make sure the whole canvas area is interactive.
    app.stage.hitArea = app.screen;

    // Follow the pointer
    app.stage.addEventListener('pointermove', (e) => {
      // playerBlue.position.copyFrom(e.global);
    });

    app.view.addEventListener('pointermove', e => {
      //console.log(e.clientX, e.clientY);

    });




    console.log('HELLO!');

let pointerPosition = null;

app.stage.hitArea = app.screen;
app.stage.on('pointermove', (event) => {
    pointerPosition = pointerPosition || { x: 0, y: 0 };
    pointerPosition.x = event.global.x;
    pointerPosition.y = event.global.y;

    console.log(pointerPosition.x, pointerPosition.y);
});

// Listen for animate update
app.ticker.add(() => {
    if (!pointerPosition) return;

    playerBlue.rotation = rotateToPoint(pointerPosition.x, pointerPosition.y, playerBlue.position.x, playerBlue.position.y);

    
});





function rotateToPoint(mx, my, px, py){  
  let self = this;
  let dist_Y = my - py;
  let dist_X = mx - px;
  let angle = Math.atan2(dist_Y,dist_X);
  //let degrees = angle * 180/ Math.PI;
  return angle;
}





    // Lets create an array of soccer balls!
    let balls = [];
    let ballSpeed = 5;









  </script>
</body>

</html>